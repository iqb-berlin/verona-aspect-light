<div aspectInViewDetection
     detectionType="top"
     [intersectionContainer]="pagesContainer"
     (intersecting)="selectedIndexChange.emit(scrollPageIndex)">
  <aspect-section
    *ngFor="let section of page.sections"
    class="section"
    [class.static-section]="!section.dynamicPositioning"
    [style.backgroundColor]="section.dynamicPositioning ? null : section.backgroundColor"
    [style.minHeight]="section.dynamicPositioning ? 'auto' : section.height + 'px'"
    [pageIndex]=pageIndex
    [section]="section"
    aspectSectionVisibilityHandling
    [pageSections]="page.sections">
  </aspect-section>
</div>
<div aspectInViewDetection
     detectionType="bottom"
     [intersectionContainer]="pagesContainer"
     (intersecting)="selectedIndexChange.emit(scrollPageIndex)">
</div>
